<!DOCTYPE html>
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Visualisierung des Graphen</title>
    <link rel="stylesheet" href="style.css">

    <!-- wichtig: diese Quelle muss als erstes stehen, also vor main.js!!! -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <!-- set the arrow and the text in line -->
    <style>
        p {
            display: inline;
        }
    </style>
</head>

<body>
    <div id="top">
        <div id="actionbar">
            <!-- changed the name of actionbar -->
            <a href="javascript:history.back()"> <img src="arrow.png" alt="pfeil"
                    style="width:50px;height:30px;vertical-align :middle; "></a>
            <p>Condition Monotoring</p>
        </div>
    </div>
    <div class="diagrammbutton">
        <!-- Adding icon in buttons -->
        <button class="Temperatur">Temperatur<div id="Temperatur"><img src="Temperatur.png" /></button>
        <button class="Akkustik">Akustik<div id="Akkustik"><img src="akkustik.png" /></button>
        <button class="Vibration">Vibration<div id="Temperatur"><img src="vibration.png" /></button>
    </div>
    <!-- Define the Chart -->
    <div class="chart-container" style="position: relative; height:40vh; width:80vw">
        <canvas id="myChart"></canvas>
    </div>
    <!-- Link with Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
    <canvas id="canvas"></canvas>
    <script>

        // variable, which saves link to the website
        const url = 'http://it2wi1.if-lab.de/rest/mpr_fall1';

        // If reach the data successfully, then  parse and save the data in variable auf2
        async function getDaten() {
            const response = await fetch(url);
            var auf2 = await response.json();

            // Test to print out the data on Website´s console
            console.log(auf2);

            // Create an array of Datum
            var labels = auf2.map(function (e) {
                return e.datum;
            });

            // A test to see if all element were saved in array. Doesn ´t affect anything
            console.log(labels);

            // Create and array of Temperatur
            var data = auf2.map(function (e) {
                return e.werte.Tavg_temp;
            });
            // A test too =)))
            console.log(data);
            ;
            var chartObject = document.getElementById('canvas');
            var chart = new Chart(chartObject, {
                type: 'bar', // Art des Diagramms z.B. 'line', 'bar', etc.
                // Labels definieren -> Abszisse
                data: {

                    labels: labels,  // X - Achse
                    datasets: [{
                        label: "Graph Line",
                        backgroundColor: 'rgba(65,105,225,0.4)',
                        borderColor: 'rgba(65,105,255,1)',
                        data: data  // Y - Achse
                    }]
                },
                // damit der Chart bei 0 beginnt:
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });
        }
        getDaten();
    </script>

    <div id="content">(=Optimale Qualität)</div>
    <button onclick="aktualisiere()">aktualisiere</button>
    </div>

</body>

</html>
        
		
   

